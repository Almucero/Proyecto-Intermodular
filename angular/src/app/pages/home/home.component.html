<div class="min-h-screen bg-gray-900 text-white font-sans pb-20">
  <div class="contenedor-imagenes">
    <img #backgroundLayer src="assets/images/fondo.jpg" class="background" />
    <img #jokerLayer src="assets/images/joker.png" class="joker" />
    <img #geraltLayer src="assets/images/geralt.avif" class="geralt" />
    <img #wavesLayer src="assets/images/waves.png" class="waves" />
  </div>
  <div
    #mainContent
    class="flex-1 flex flex-col justify-between pb-4 overflow-hidden"
  >
    <section class="mt-4 flex-none w-full">
      <h2 class="text-2xl font-bold text-cyan-300 mb-4 text-center">
        {{ "genres.title" | translate }}
      </h2>
      <section class="mb-11 relative">
        <div
          class="flex justify-center gap-3 overflow-x-auto py-1 px-4 no-scrollbar max-w-full"
        >
          <span
            *ngFor="let gen of genres"
            class="w-48 px-5 py-2 bg-gray-800 hover:bg-cyan-500 hover:text-white transition rounded-full cursor-pointer text-base text-center truncate duration-150 active:scale-95"
            (click)="goToGenres(gen)"
          >
            {{ gen | translate }}
          </span>
        </div>
        <div
          class="absolute left-1/2 top-1/2 -translate-y-1/2 pointer-events-none"
          style="
            margin-left: calc((8 * 12rem) / 2 + (7 * 0.75rem) / 2 + 1.5rem);
          "
        >
          <button
            (click)="toggleAllGenres(); $event.stopPropagation()"
            class="flex items-center gap-1 text-cyan-300 hover:text-cyan-400 transition-colors duration-150 active:scale-95 bg-transparent border-none cursor-pointer text-base pointer-events-auto"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 transition-transform duration-300"
              [class.rotate-180]="showAllGenres"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </button>
          <div
            *ngIf="showAllGenres"
            class="absolute top-full right-0 mt-4 bg-gray-950 rounded-lg shadow-xl overflow-hidden border border-gray-800 max-h-80 overflow-y-auto pointer-events-auto z-[99999]"
            [class.animate-slideDown]="!isClosingGenreDropdown"
            [class.animate-slideUp]="isClosingGenreDropdown"
            style="min-width: 300px"
          >
            <div class="flex flex-col py-1">
              <button
                *ngFor="let gen of otherGenres"
                (click)="goToGenres(gen); closeGenreDropdown()"
                class="px-4 py-2 hover:bg-gray-800 text-left bg-transparent border-none transition-colors duration-150 active:scale-95 text-white cursor-pointer"
              >
                {{ gen | translate }}
              </button>
            </div>
          </div>
        </div>
      </section>
    </section>

    <div class="flex-col justify-evenly min-h-3">
      <app-carousel
        [title]="'home.bestSellers'"
        [items]="bestSellers"
        sectionId="masVendidos"
        (itemClick)="goToProduct($event)"
      ></app-carousel>

      <app-carousel
        [title]="'home.offers'"
        [items]="onSaleGames"
        sectionId="ofertas"
        (itemClick)="goToProduct($event)"
      ></app-carousel>

      <app-carousel
        [title]="'home.topRated'"
        [items]="topRatedGames"
        sectionId="mejorValorados"
        (itemClick)="goToProduct($event)"
      ></app-carousel>
    </div>
  </div>
</div>
