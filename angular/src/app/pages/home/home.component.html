<div class="min-h-screen bg-gray-900 text-white font-sans pb-8">
  <img src="assets/images/homeScreenPhoto.png" height="400px" width="100%" />
  <div class="flex-1 flex flex-col justify-between pb-4 overflow-hidden">
    <section class="mt-4 flex-none w-full">
      <h2 class="text-2xl font-bold text-cyan-300 mb-2 text-center">
        {{ "genres.title" | translate }}
      </h2>
      <section class="mb-11">
        <div
          class="flex justify-center gap-3 overflow-x-auto py-1 px-4 no-scrollbar max-w-full"
        >
          <span
            *ngFor="let gen of genres"
            class="w-48 px-5 py-2 bg-gray-800 hover:bg-cyan-500 hover:text-white transition rounded-full cursor-pointer text-base text-center truncate duration-150 active:scale-95"
            (click)="goToGenres(gen)"
          >
            {{ gen | translate }}
          </span>
        </div>
      </section>
    </section>

    <div class="flex-col justify-evenly min-h-3">
      <section class="relative flex flex-col justify-center mt-0">
        <h2 class="text-xl font-semibold text-cyan-300 mb-1 text-center">
          {{ "home.bestSellers" | translate }}
        </h2>
        <div class="relative w-full px-10">
          <div
            class="absolute inset-y-0 left-0 w-48 bg-gradient-to-r from-gray-900 from-20% to-transparent z-40 pointer-events-none transition-opacity duration-300"
            [class.opacity-0]="!arrowState['masVendidos'].left"
            [class.opacity-100]="arrowState['masVendidos'].left"
          ></div>
          <span
            (click)="scrollLeft(carouselInMasVendidos, 'masVendidos')"
            [class.opacity-30]="!arrowState['masVendidos'].left"
            class="absolute left-2 top-[4.5rem] -translate-y-1/2 text-white text-4xl cursor-pointer select-none z-20 hover:text-cyan-300 transition-all duration-150 active:scale-95"
            >&#8249;</span
          >

          <div
            #carouselInMasVendidos
            class="flex gap-4 overflow-x-auto px-2 py-2 no-scrollbar cursor-grab active:cursor-grabbing select-none"
            (scroll)="updateScrollState(carouselInMasVendidos, 'masVendidos')"
            (mousedown)="onMouseDown($event, carouselInMasVendidos)"
            (mouseleave)="onMouseLeave(carouselInMasVendidos)"
            (mouseup)="onMouseUp(carouselInMasVendidos)"
            (mousemove)="onMouseMove($event, carouselInMasVendidos)"
          >
            <app-game-card
              *ngFor="let item of bestSellers"
              [game]="item"
              [coverUrl]="getCoverUrl(item)"
              (cardClick)="goToProduct($event)"
              class="flex-shrink-0"
            ></app-game-card>
          </div>

          <span
            (click)="scrollRight(carouselInMasVendidos, 'masVendidos')"
            [class.opacity-30]="!arrowState['masVendidos'].right"
            class="absolute right-2 top-[4.5rem] -translate-y-1/2 text-white text-4xl cursor-pointer select-none z-20 hover:text-cyan-300 transition-all duration-150 active:scale-95"
            >&#8250;</span
          >
          <div
            class="absolute inset-y-0 right-0 w-48 bg-gradient-to-l from-gray-900 from-20% to-transparent z-40 pointer-events-none transition-opacity duration-300"
            [class.opacity-0]="!arrowState['masVendidos'].right"
            [class.opacity-100]="arrowState['masVendidos'].right"
          ></div>
        </div>
      </section>

      <section class="relative flex flex-col justify-center mt-6">
        <h2 class="text-xl font-semibold text-cyan-300 mb-1 text-center">
          {{ "home.offers" | translate }}
        </h2>
        <div class="relative w-full px-10">
          <div
            class="absolute inset-y-0 left-0 w-48 bg-gradient-to-r from-gray-900 from-20% to-transparent z-40 pointer-events-none transition-opacity duration-300"
            [class.opacity-0]="!arrowState['ofertas'].left"
            [class.opacity-100]="arrowState['ofertas'].left"
          ></div>
          <span
            (click)="scrollLeft(carouselInOfertas, 'ofertas')"
            [class.opacity-30]="!arrowState['ofertas'].left"
            class="absolute left-2 top-[4.5rem] -translate-y-1/2 text-white text-4xl cursor-pointer select-none z-20 hover:text-cyan-300 transition-all duration-150 active:scale-95"
            >&#8249;</span
          >

          <div
            #carouselInOfertas
            class="flex gap-4 overflow-x-auto px-2 py-2 no-scrollbar cursor-grab active:cursor-grabbing select-none"
            (scroll)="updateScrollState(carouselInOfertas, 'ofertas')"
            (mousedown)="onMouseDown($event, carouselInOfertas)"
            (mouseleave)="onMouseLeave(carouselInOfertas)"
            (mouseup)="onMouseUp(carouselInOfertas)"
            (mousemove)="onMouseMove($event, carouselInOfertas)"
          >
            <div
              *ngFor="let item of onSaleGames"
              class="flex-shrink-0 w-56 group cursor-pointer transition-transform duration-150 active:scale-95"
              (click)="goToProduct(item.id)"
            >
              <div
                class="h-32 bg-gray-700 rounded-xl overflow-hidden shadow-md group-hover:scale-105 transition-transform duration-300 relative"
                (mouseenter)="onGameMouseEnter(item.id)"
                (mouseleave)="onGameMouseLeave()"
              >
                <img
                  *ngIf="item.isOnSale"
                  src="assets/images/sale.png"
                  class="absolute top-0 left-0 w-16 h-16 z-30 pointer-events-none"
                />
                <img
                  [src]="getCoverUrl(item)"
                  class="w-full h-full object-cover pointer-events-none absolute inset-0 z-10"
                />
                <video
                  *ngIf="hoveredGameId === item.id && item.videoUrl"
                  [src]="getSafeVideo(item.id)"
                  class="w-full h-full object-cover pointer-events-none absolute inset-0 z-20 bg-black"
                  autoplay
                  muted
                  loop
                  playsinline
                ></video>
              </div>
              <div
                class="mt-2 flex items-center justify-between text-sm font-medium text-gray-300 group-hover:text-white transition-colors"
              >
                <div
                  class="flex-1 min-w-0 pr-2 title-container"
                  [title]="item.title"
                >
                  <span #gameTitle class="animate-scroll">{{
                    item.title
                  }}</span>
                </div>
                <span class="flex-shrink-0 whitespace-nowrap">{{
                  (item.isOnSale ? item.salePrice : item.price)
                    | currency : "EUR"
                }}</span>
              </div>
            </div>
          </div>
          <span
            (click)="scrollRight(carouselInOfertas, 'ofertas')"
            [class.opacity-30]="!arrowState['ofertas'].right"
            class="absolute right-2 top-[4.5rem] -translate-y-1/2 text-white text-4xl cursor-pointer select-none z-20 hover:text-cyan-300 transition-all duration-150 active:scale-95"
            >&#8250;</span
          >
          <div
            class="absolute inset-y-0 right-0 w-48 bg-gradient-to-l from-gray-900 from-20% to-transparent z-40 pointer-events-none transition-opacity duration-300"
            [class.opacity-0]="!arrowState['ofertas'].right"
            [class.opacity-100]="arrowState['ofertas'].right"
          ></div>
        </div>
      </section>

      <section class="relative flex flex-col justify-center mt-6">
        <h2 class="text-xl font-semibold text-cyan-300 mb-1 text-center">
          {{ "home.topRated" | translate }}
        </h2>
        <div class="relative w-full px-10">
          <div
            class="absolute inset-y-0 left-0 w-48 bg-gradient-to-r from-gray-900 from-20% to-transparent z-40 pointer-events-none transition-opacity duration-300"
            [class.opacity-0]="!arrowState['mejorValorados'].left"
            [class.opacity-100]="arrowState['mejorValorados'].left"
          ></div>
          <span
            (click)="scrollLeft(carouselInMejorValorados, 'mejorValorados')"
            [class.opacity-30]="!arrowState['mejorValorados'].left"
            class="absolute left-2 top-[4.5rem] -translate-y-1/2 text-white text-4xl cursor-pointer select-none z-20 hover:text-cyan-300 transition-all duration-150 active:scale-95"
            >&#8249;</span
          >

          <div
            #carouselInMejorValorados
            class="flex gap-4 overflow-x-auto px-2 py-2 no-scrollbar cursor-grab active:cursor-grabbing select-none"
            (scroll)="
              updateScrollState(carouselInMejorValorados, 'mejorValorados')
            "
            (mousedown)="onMouseDown($event, carouselInMejorValorados)"
            (mouseleave)="onMouseLeave(carouselInMejorValorados)"
            (mouseup)="onMouseUp(carouselInMejorValorados)"
            (mousemove)="onMouseMove($event, carouselInMejorValorados)"
          >
            <div
              *ngFor="let item of topRatedGames"
              class="flex-shrink-0 w-56 group cursor-pointer transition-transform duration-150 active:scale-95"
              (click)="goToProduct(item.id)"
            >
              <div
                class="h-32 bg-gray-700 rounded-xl overflow-hidden shadow-md group-hover:scale-105 transition-transform duration-300 relative"
                (mouseenter)="onGameMouseEnter(item.id)"
                (mouseleave)="onGameMouseLeave()"
              >
                <img
                  *ngIf="item.isOnSale"
                  src="assets/images/sale.png"
                  class="absolute top-0 left-0 w-16 h-16 z-30 pointer-events-none"
                />
                <img
                  [src]="getCoverUrl(item)"
                  class="w-full h-full object-cover pointer-events-none absolute inset-0 z-10"
                />
                <video
                  *ngIf="hoveredGameId === item.id && item.videoUrl"
                  [src]="getSafeVideo(item.id)"
                  class="w-full h-full object-cover pointer-events-none absolute inset-0 z-20 bg-black"
                  autoplay
                  muted
                  loop
                  playsinline
                ></video>
              </div>
              <div
                class="mt-2 flex items-center justify-between text-sm font-medium text-gray-300 group-hover:text-white transition-colors"
              >
                <div
                  class="flex-1 min-w-0 pr-2 title-container"
                  [title]="item.title"
                >
                  <span #gameTitle class="animate-scroll">{{
                    item.title
                  }}</span>
                </div>
                <span class="flex-shrink-0 whitespace-nowrap">{{
                  (item.isOnSale ? item.salePrice : item.price)
                    | currency : "EUR"
                }}</span>
              </div>
            </div>
          </div>
          <span
            (click)="scrollRight(carouselInMejorValorados, 'mejorValorados')"
            [class.opacity-30]="!arrowState['mejorValorados'].right"
            class="absolute right-2 top-[4.5rem] -translate-y-1/2 text-white text-4xl cursor-pointer select-none z-20 hover:text-cyan-300 transition-all duration-150 active:scale-95"
            >&#8250;</span
          >
          <div
            class="absolute inset-y-0 right-0 w-48 bg-gradient-to-l from-gray-900 from-20% to-transparent z-40 pointer-events-none transition-opacity duration-300"
            [class.opacity-0]="!arrowState['mejorValorados'].right"
            [class.opacity-100]="arrowState['mejorValorados'].right"
          ></div>
        </div>
      </section>
    </div>
  </div>
</div>
